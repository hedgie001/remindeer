"main";let express;_e0b‍.w('express',[["default",function(v){express=v}]]);let bodyParser;_e0b‍.w('body-parser',[["default",function(v){bodyParser=v}]]);let path;_e0b‍.w('path',[["default",function(v){path=v}]]);let cookieParser;_e0b‍.w('cookie-parser',[["default",function(v){cookieParser=v}]]);let orderRoutes;_e0b‍.w('./routes/orderRoutes',[["orderRoutes",function(v){orderRoutes=v}]]);






const app = express();
const router = express.Router();

app.use(express.static(path.resolve('public')));

app.use(bodyParser.json());

app.use(express.cookieParser());
app.use(function (req, res, next) {
    // check if client sent cookie
    var cookie = req.cookies.cookieName;
    if (cookie === undefined)
    {
        // no: set a new cookie
        var randomNumber=Math.random().toString();
        randomNumber=randomNumber.substring(2,randomNumber.length);
        res.cookie('cookieName',randomNumber, { maxAge: 900000, httpOnly: true });
        console.log('cookie created successfully');
    }
    else
    {
        // yes, cookie was already present
        console.log('cookie exists', cookie);
    }
    next(); // <-- important!
});

app.get("/", function(req, res){
    console.log('Cookies: ', req.cookies);
    res.sendFile("/index.html",  {root: __dirname + '/public/'});
});
app.use("/", orderRoutes);

const hostname = '127.0.0.1';
const port = 3001;
app.listen(port, hostname, () => {
    console.log(`Server running at http://${hostname}:${port}/`);
});